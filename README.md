# Topface Media — пролонгации 2023 (краткий README)

## Назначение
Проект считает коэффициенты пролонгации **coef1** (1-й месяц) и **coef2** (2-й месяц) по **AM** и **отделам** за 2023 год и формирует итоговый отчёт.

## Что считается
- **coef1:** доля платежей в месяце *M* среди проектов, плативших в *M-1*.  
- **coef2:** доля платежей в месяце *M* среди проектов, плативших в *M-2* и не плативших в *M-1*.  
Срезы: по AM и по отделу; периоды: помесячно 2023 и «итого за 2023».

## Данные и база
- Исходники: `/out/shipments.csv` (факт оплат: id × month × shipment), `/out/projects_dim.csv` (размерность: id × month_last × AM × Account).  
- СУБД: MySQL; схема содержит две таблицы **shipments** и **projects_dim**.  
- Расчёты выполняются SQL-скриптами из `/sql_requests/`, результаты сохраняются в `/sql_results/`.

## Процесс (очень кратко)
1. Загрузка CSV в базу (таблицы `shipments`, `projects_dim`).  
2. Запуск скриптов `coef1_*` и `coef2_*` для помесячных и годовых срезов.  
3. Экспорт результатов в CSV и сборка Excel-отчёта.

## Результаты
- `/sql_results/*.csv` — выгрузки по coef1/coef2.  
- `/report/report.xlsx` — итоговый отчёт (Dashboard + таблицы коэффициентов).

## Структура
`/data` — сырые файлы · `/out` — подготовленные CSV · `/sql_requests` — SQL-скрипты · `/sql_results` — результаты · `/report` — отчёт · `/notebooks` — поясняющие ноутбуки.

